<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{% block title %}Bakers Lovers{% endblock %}</title>
    
    <!-- Google Web Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&family=Oswald:wght@500;600;700&family=Pacifico&display=swap" rel="stylesheet">

    <!-- Icon Fonts -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Owl Carousel CSS (from your lib folder) -->
    <link href="{{ url_for('static', filename='lib/owlcarousel/assets/owl.carousel.min.css') }}" rel="stylesheet">

    <!-- Bootstrap CSS (use your local version) -->
    <link href="{{ url_for('static', filename='css/bootstrap.min.css') }}" rel="stylesheet">
    
    <!-- Your main style.css -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">

    <!-- Favicon - you need to create this or use an existing image -->
    <!-- Temporary solution: use one of your cake images as favicon -->
    <link href="{{ url_for('static', filename='img/cake-1.jpg') }}" rel="icon" type="image/jpg">

    <!-- CSRF Token Meta Tag -->
    <meta name="csrf-token" content="{{ csrf_token() }}">

    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Navigation -->
    {% include 'partials/_navbar.html' %}
    
    <main role="main" class="pb-3">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    {% include 'partials/_footer.html' %}

    <!-- JavaScript Libraries -->
    <!-- jQuery (using CDN for reliability) -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <!-- Bootstrap Bundle (using CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Your local JavaScript libraries -->
    <script src="{{ url_for('static', filename='lib/easing/easing.min.js') }}"></script>
    <script src="{{ url_for('static', filename='lib/waypoints/waypoints.min.js') }}"></script>
    <script src="{{ url_for('static', filename='lib/counterup/counterup.min.js') }}"></script>
    <script src="{{ url_for('static', filename='lib/owlcarousel/owl.carousel.min.js') }}"></script>
    
    <!-- Your main JavaScript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    
    <!-- CSRF Token for AJAX -->
    <script>
        // CSRF token setup for AJAX requests
        $.ajaxSetup({
            beforeSend: function(xhr, settings) {
                if (!/^(GET|HEAD|OPTIONS|TRACE)$/i.test(settings.type) && !this.crossDomain) {
                    xhr.setRequestHeader("X-CSRFToken", $('meta[name="csrf-token"]').attr('content'));
                }
            }
        });
        
        // Owl Carousel initialization (if needed)
        $(document).ready(function(){
            if($('.owl-carousel').length) {
                $('.owl-carousel').owlCarousel({
                    loop: true,
                    margin: 10,
                    nav: true,
                    responsive: {
                        0: {
                            items: 1
                        },
                        600: {
                            items: 2
                        },
                        1000: {
                            items: 3
                        }
                    }
                });
            }
            
            // Counter Up initialization
            if($('[data-toggle="counter-up"]').length) {
                $('[data-toggle="counter-up"]').counterUp({
                    delay: 10,
                    time: 1000
                });
            }
            
            // Video Modal functionality
            $('#videoModal').on('shown.bs.modal', function (e) {
                var videoSrc = $(e.relatedTarget).data('src');
                $('#video').attr('src', videoSrc + "?autoplay=1");
            });
            
            $('#videoModal').on('hide.bs.modal', function (e) {
                $('#video').attr('src', '');
            });
        });
    </script>
    
    {% block extra_js %}{% endblock %}
</body>
</html>